<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Produto</title>
    <link rel="stylesheet" href="produto.css">
    <link rel="stylesheet" href="/main.css">

</head>
<body>
    <!-- Bot√£o de voltar -->
    <a href="../index.html"><button class="back-button">‚Üê Voltar</button></a>

    <!-- Container principal -->
    <div class="main-container">
        <!-- Imagem do Produto -->
        <div class="product-image">
            <img id="product-image" src="" alt="Imagem do Produto">
        </div>

        <!-- Informa√ß√µes do Produto -->
        <div class="product-info">
            <h1 id="product-title"></h1>
            <p id="product-description" class="description"></p>

            <!-- Se√ß√£o de Tabs -->
            <div class="tabs">
                <button class="tab-button active" id="details-btn">Detalhes do Produto</button>
                <button class="tab-button" id="how-to-use-btn">Como Usar</button>
            </div>
            
            <!-- Conte√∫do das Tabs -->
            <div class="tab-content" id="details-content">
                <h3>Detalhes do Produto:</h3>
                <ul>
                    <li><strong>Loja:</strong> <span id="product-store"></span></li>
                    <li><strong>Tipo de Cabelo:</strong> <span id="product-hair-type"></span></li>
                    <li><strong>Problema Resolvido:</strong> <span id="product-problem"></span></li>
                </ul>
            </div>
            
            <div class="tab-content hidden" id="how-to-use-content">
                <h3>Como Usar:</h3>
                <p>Siga estas etapas para usar o produto:</p>
                <ol>
                    <li>Aplique o produto nos cabelos √∫midos, ap√≥s lavar com shampoo.</li>
                    <li>Deixe agir por 5-10 minutos, dependendo da necessidade.</li>
                    <li>Enx√°gue abundantemente com √°gua morna.</li>
                </ol>
            </div>

            <style>
                .hidden {
                    display: none;
                }

                .tab-button.active {
                    background-color: #ccc;
                    font-weight: bold;
                }

                .tab-content
                {
                    display: block;
                }
            </style>

        <!-- Se√ß√£o de Avalia√ß√µes -->
        <div class="reviews-section">
            <h2>Avalia√ß√µes dos Consumidores</h2>
            
            <!-- Avalia√ß√£o 1 (Est√°tica) -->
            <div class="review-card">
                <div class="review-details">
                    <strong>Luciana</strong><br>
                    <span>S√£o Paulo</span>
                </div>
                <div class="review-content">
                    <div class="review-header">
                        <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</span>
                        <span class="review-date">01/10/2023</span>
                    </div>
                    <h3>ADOREI O PRODUTO</h3>
                    <p>Eu adoro esse produto e uso h√° mais de 20 anos, por√©m n√£o me adaptei a esse novo cheiro. Por favor, voltem ao cheirinho original.</p>
                    <div class="review-recommend">
                        <span>üëç Sim, eu recomendo esse produto</span>
                    </div>
                </div>
            </div>

            <!-- Avalia√ß√£o 2 (Est√°tica) -->
            <div class="review-card">
                <div class="review-details">
                    <strong>Aline</strong><br>
                    <span>Rio de Janeiro</span>
                </div>
                <div class="review-content">
                    <div class="review-header">
                        <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                        <span class="review-date">15/09/2023</span>
                    </div>
                    <h3>PERFEITO</h3>
                    <p>Esse produto √© incr√≠vel! Meu cabelo ficou macio e brilhoso.</p>
                    <div class="review-recommend">
                        <span>üëç Sim, eu recomendo esse produto</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Script JavaScript -->
    <script>
        async function carregarProduto() {
            const params = new URLSearchParams(window.location.search);
            const idProduto = params.get('id');

            if (!idProduto) {
                document.querySelector('.main-container').innerHTML = "<p>Produto n√£o encontrado.</p>";
                return;
            }

            try {
                const response = await fetch(`http://localhost:5000/produto/${idProduto}`);
                if (!response.ok) throw new Error("Erro ao buscar produto: " + response.status);

                const produto = await response.json();
                exibirProduto(produto);
            } catch (error) {
                console.error("Erro ao carregar produto:", error);
                document.querySelector('.main-container').innerHTML = "<p>Erro ao carregar os detalhes do produto.</p>";
            }
        }

        function exibirProduto(produto) {
            document.getElementById('product-image').src = produto.imagem || '../img/default.jpg';
            document.getElementById('product-title').textContent = produto.nome_produto;
            document.getElementById('product-description').textContent = produto.descricao;
            document.getElementById('product-store').textContent = produto.nome_loja || "N√£o especificado";
            document.getElementById('product-hair-type').textContent = produto.tipo_cabelo || "Geral";
            document.getElementById('product-problem').textContent = produto.problema || "N√£o especificado";
        }

        document.addEventListener('DOMContentLoaded', carregarProduto);
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const detailsBtn = document.getElementById('details-btn');
            const howToUseBtn = document.getElementById('how-to-use-btn');
            const detailsContent = document.getElementById('details-content');
            const howToUseContent = document.getElementById('how-to-use-content');

            // Fun√ß√£o para alternar entre abas
            function switchTab(activeButton, activeContent, inactiveButton, inactiveContent) {
                activeButton.classList.add('active');
                inactiveButton.classList.remove('active');
                activeContent.classList.remove('hidden');
                inactiveContent.classList.add('hidden');
            }

            // Eventos de clique para alternar
            detailsBtn.addEventListener('click', () => {
                switchTab(detailsBtn, detailsContent, howToUseBtn, howToUseContent);
            });

            howToUseBtn.addEventListener('click', () => {
                switchTab(howToUseBtn, howToUseContent, detailsBtn, detailsContent);
            });
        });
    </script>
</body>
</html>
